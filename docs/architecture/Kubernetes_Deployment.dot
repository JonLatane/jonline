digraph G {
  size = "100,100";
  browser [shape = note;style = filled;color = ".7 .3 1.0";label = "Web Browser";];
  
  
  
  resolve_namespace [label = "Resolve Namespace from DNS lookup";];
  browser -> resolve_namespace [style = bold;];
  jonlineio [label = "jonline.io";];
  oakcitysocial [label = "oakcity.social";];
  bullcitysocial [label = "bullcity.social";];
  
  resolve_namespace -> jonlineio [style = dotted;];
  resolve_namespace -> oakcitysocial [style = dotted;];
  resolve_namespace -> bullcitysocial [style = dotted;];
  
  subgraph cluster0 {
    label = "jonline namespace";
    node [style = filled; color = white;];
    style = filled;
    color = lightgrey;
    
    jonline0 [label = <<table><tr><td>jonline</td></tr><tr><td>(K8s LoadBalancer)</td></tr></table>>];
    minio0 [label = "Minio";];
    postgres0 [label = "Postgres";];
    tls0 [shape = "box";label = "jonline-tls (TLS secret)";];
    
    jonline0 -> minio0;
    jonline0 -> postgres0;
    jonline0 -> tls0;
    
    
    // certs [shape = box;style = filled;color = ".7 .3 1.0" label = <
    // <table>
    //   <tr>
    //     <td>TLS/SSL Cert Management</td>
    //   </tr>
    //   <tr>
    //     <td>Based on K8s ClusterRoles and RoleBinding</td>
    //   </tr>
    // </table>
    // >];
  }
  
  jonlineio -> jonline0 [label="$12/month"];
  // certs -> jbl;
  
  subgraph cluster1 {
    label = "oakcitysocial namespace";
    node [style = filled; color = white;];
    style = filled;
    color = lightgrey;
    
    jonline1 [label = "jonline";];
    minio1 [label = "Minio";];
    postgres1 [label = "Postgres";];
    
    jonline1 -> minio1;
    jonline1 -> postgres1;
    tls1 [shape = "box";label = "jonline-tls (TLS secret)";];
    jonline1 -> tls1;
  }
  oakcitysocial -> jonline1 [label="$12/month"];
  
  subgraph cluster2 {
    label = "bullcitysocial namespace";
    node [style = filled; color = white;];
    style = filled;
    color = lightgrey;
    
    jonline2 [label = "jonline";];
    minio2 [label = "Minio";];
    postgres2 [label = "Postgres";];
    
    jonline2 -> minio2;
    jonline2 -> postgres2;
    tls2 [shape = "box";label = "jonline-tls (TLS secret)";];
    jonline2 -> tls2;
  }
  bullcitysocial -> jonline2 [label="$12/month"];
  
  // certs -> tls0;
  // certs -> tls1;
  // certs -> tls2;
  // resolve_namespace ->  [style=dotted] bullcitysocial;
  // execute -> { make_string; printf}
  // jonlineio -> make_string;
  // edge [color=red];
  // jbl -> printf [style=bold,label="100 times"];
  // make_string [label="make a\nstring"];
  // node [shape=box,style=filled,color=".7 .3 1.0"];
  // execute -> compare;
}